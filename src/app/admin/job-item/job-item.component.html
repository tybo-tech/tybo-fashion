<div class="cart-item" *ngIf="jobItem && job">
  <img
    (click)="editMode = true"
    [src]="jobItem.FeaturedImageUrl"
    *ngIf="jobItem.FeaturedImageUrl"
    alt=""
  />
  <div
    (click)="editMode = true"
    class="image-place-holder"
    *ngIf="!jobItem.FeaturedImageUrl"
  ></div>
  <div class="details p-0">
    <a (click)="editMode = true" class="link-info mb-1 small">{{
      jobItem.ItemName
    }}</a>
    <small class="d-block" *ngIf="jobItem.Metadata && jobItem.Metadata.AssignedTo">
      <i class="bi bi-person-square"></i> {{ jobItem.Metadata.AssignedTo | userPipe }}
    </small>
    <div class="m-0 d-flex mb-2 mt-2 align-items-center gap-2 text-muted">
      <span class="small">Size: {{ jobItem.Size }}</span>
    </div>
    <div class="price d-flex gap-3">
      <span>{{ jobItem.UnitPrice * jobItem.Quantity | currency : "R" }}</span>
      <app-admin-qty
        [qty]="jobItem.Quantity"
        (qtyChange)="update_qty($event, jobItem)"
      />
      <span (click)="delete_from_cart(jobItem)" class="small delete link-danger">
        <i class="bi bi-trash"></i>
      </span>
    </div>
  </div>
</div>

<app-job-item-form
  *ngIf="editMode && jobItem"
  [jobItem]="jobItem"
  [user]="user"
  (onClose)="editMode = !editMode"
  (jobItemUpdated)="onJobItemUpdated($event)"
/>
