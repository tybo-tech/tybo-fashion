<div class="dashboard-container" *ngIf="user">
  <div class="container-fluid py-4">
    <!-- Welcome Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h1 class="fw-bold mb-1">Welcome back, {{ user.Name }}!</h1>
        <p class="text-muted mb-0">Here's what's happening with your business today</p>
      </div>
      <div class="d-none d-md-block">
        <span class="badge bg-primary bg-opacity-10 text-primary p-2">
          <i class="bi bi-calendar me-2"></i>{{ today | date:'fullDate' }}
        </span>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="row g-4 mb-4">
      <div class="col-12">
        <h5 class="fw-bold mb-3">Business Overview</h5>
      </div>
      <div class="col-6 col-md-4 col-lg-3" *ngFor="let card of cards">
        <a [routerLink]="card.link" class="text-decoration-none">
          <div class="card card-hover h-100">
            <div class="card-body text-center p-3">
              <h6 class="card-subtitle text-muted mb-2">{{ card.title }}</h6>
              <h3 class="fw-bold mb-0">{{ card.count | number }}</h3>
              <div class="mt-3">
                <span class="badge bg-light text-dark">
                  <i class="bi bi-arrow-right-short"></i> View all
                </span>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>

    <!-- Jobs Status Section -->
    <div class="row g-4 mb-4">
      <div class="col-12">
        <h5 class="fw-bold mb-3">Jobs Status</h5>
      </div>
      <div class="col-6 col-md-3" *ngFor="let status of jobStatuses">
        <a [routerLink]="status.link" class="text-decoration-none">
          <div class="card card-hover h-100" [ngClass]="status.classes">
            <div class="card-body text-center p-3">
              <h6 class="card-subtitle mb-2">{{ status.name }}</h6>
              <h3 class="fw-bold mb-0">{{ status.count | number }}</h3>
              <div class="progress mt-3" style="height: 4px;">
                <div class="progress-bar" [ngClass]="{
                  'bg-warning': status.name === 'Not Started',
                  'bg-info': status.name === 'In Progress',
                  'bg-danger': status.name === 'Stuck',
                  'bg-success': status.name === 'Complete'
                }" [style.width.%]="getJobPercentage(status.count)"></div>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="row g-3">
      <div class="col-12">
        <h5 class="fw-bold mb-3">Quick Actions</h5>
      </div>
      <div class="col-6 col-md-4 col-lg-3" *ngFor="let shortcut of shortcuts">
        <button class="btn btn-outline-primary btn-hover w-100 py-3 d-flex flex-column align-items-center"
                (click)="navigateTo(shortcut.route)">
          <i class="bi fs-4 mb-2" [ngClass]="{
            'bi-briefcase': shortcut.label.includes('Job'),
            'bi-box-seam': shortcut.label.includes('Product'),
            'bi-person-plus': shortcut.label.includes('Customer')
          }"></i>
          <span>{{ shortcut.label }}</span>
        </button>
      </div>
    </div>

    <!-- Recent Activity (Placeholder for future enhancement) -->
    <div class="row mt-5">
      <div class="col-12">
        <h5 class="fw-bold mb-3">Recent Activity</h5>
        <div class="card">
          <div class="card-body">
            <p class="text-muted text-center py-4">Recent activity will appear here</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
